<div header class="view-container__header"></div>

<div class="view-container__content">

    <div class="insights__textsection">
        Here are some useful insights around your insights.
    </div>

    <!-- Insight fetch form -->
    <div class="insights__datepicker">

        <form name="insightForm" ng-submit="loadInsights()" novalidate>

            <!-- Flash messages. -->
            <div flash-messages flash="flash" identifier-id="{{alertIdentifierId}}"></div>

            <div class="insights__datepicker__month" ng-class="{'has-error': insightForm.spentDate.$invalid && insightForm.$submitted}">

                <!--Hidden input of the insight chosen date-->
                <input type="hidden" name="spentDate" ng-model="insightData.spentDate" required valid-date />

                <!--insight date picker-->
                <div class="insight__form__date__input">
                    <button type="button"
                            class="insight__form__date__input__btn"
                            ng-click="openDatePicker($event)"
                            ng-model="insightData.spentDate"
                            datepicker-popup
                            is-open="datePickerOpened"
                            ng-change="onChange()"
                            min-date="datePickerMinDate"
                            max-date="datePickerMaxDate"
                            datepicker-mode="'month'" min-mode="month"
                            datepicker-options="{minMode: 'month',datepickerMode: 'month'}">{{isLoading ? 'Fetching from' : ''}} {{insightData.spentDate | friendlyMonthDate}}
                    </button>
                </div>

                <!--Error messages-->
                <div class="form-group-input__message" ng-class="{'has-error': insightForm.spentDate.$invalid && insightForm.$submitted}" ng-messages="insightForm.$error" ng-if="insightForm.$submitted">
                    <div ng-message="required">Please add a date.</div>
                    <div ng-message="validDate">Date should be in the past.</div>
                </div>
            </div>

        </form>
    </div>

    <div class="insights__summary">
        <div class="insights__summary__thumbnail">
            <span class="insights__summary__thumbnail__number">7.324</span>
            <span class="insights__summary__thumbnail__label">TOTAL</span>
        </div>
        <div class="insights__summary__thumbnail">
            <span class="insights__summary__thumbnail__number">134</span>
            <span class="insights__summary__thumbnail__label">transactions</span>
        </div>
        <div class="insights__summary__thumbnail">
            <span class="insights__summary__thumbnail__number">+5%</span>
            <span class="insights__summary__thumbnail__label">from previous month</span>
        </div>
    </div>

    <canvas id="bar"
            class="chart chart-bar"
            data="insightLineData"
            series="insightLineSeries"
            legend="true"
            labels="insight.model.insightLabels">
    </canvas>

    <div class="insights__chart__doughnut">
        <canvas class="chart chart-doughnut"
                data="insight.model.insightData"
                labels="insight.model.insightLabels"
                colours="insight.model.insightColors">
        </canvas>
    </div>

    <canvas id="line"
            class="chart chart-line"
            data="insightLineData"
            labels="insight.model.insightLabels"
            series="insightLineSeries"
            legend="true"></canvas>
</div>

<div footer class="view-container__footer"></div>